"use strict";(self["webpackChunkv2_htxt"]=self["webpackChunkv2_htxt"]||[]).push([[729],{79729:function(t,e,r){r.r(e),r.d(e,{default:function(){return u}});var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h3",[t._v("添加品牌")]),r("div",{staticClass:"add-pinpai"},[r("div",{staticClass:"footer"},[r("el-form",{ref:"tmform",staticStyle:{width:"80%"},attrs:{model:t.tmform,rules:t.rules}},[r("form-trade",{attrs:{tmform:t.tmform,handleAvatarSuccess:t.handleAvatarSuccess,beforeAvatarUpload:t.beforeAvatarUpload},on:{changeTmName:t.changeTmName,claerLogoUrl:t.claerLogoUrl}})],1),r("el-button",{on:{click:t.back}},[t._v("返 回")]),r("el-button",{attrs:{type:"primary"},on:{click:t.OK}},[t._v("确 定")])],1)])])},o=[],m=(r(38862),r(99165)),n=r(52742),s={name:"AddItem",props:["a"],mixins:[m.Z],components:{FormTrade:n.Z},data:function(){return{timeout:null}},methods:{back:function(){this.$router.push("/trademark")},changeTmName:function(t){this.tmform.tmName=t}},watch:{tmform:{deep:!0,handler:function(){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){localStorage.tmform=JSON.stringify(t.tmform)}),800)}}},beforeRouteEnter:function(t,e,r){r((function(t){t.tmform=localStorage.tmform?JSON.parse(localStorage.tmform):t.tmform}))}},i=s,l=r(1001),c=(0,l.Z)(i,a,o,!1,null,"397b004a",null),u=c.exports},52742:function(t,e,r){r.d(e,{Z:function(){return l}});var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-form-item",{attrs:{label:"品牌名称","label-width":"'100px'",prop:"tmName"}},[r("el-input",{staticClass:"inp",attrs:{autocomplete:"off"},model:{value:t.tmName,callback:function(e){t.tmName=e},expression:"tmName"}})],1),r("el-form-item",{attrs:{label:"品牌LOGO","label-width":"'100px'",prop:"logoUrl"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/dev-api/admin/product/fileUpload","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload,"list-type":"picture"}},[r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传jpg/png文件, 且不超过500kb ")]),t.tmform.logoUrl?r("img",{staticClass:"avatar",attrs:{src:t.tmform.logoUrl},on:{click:function(t){t.stopPropagation()}}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),r("i",{directives:[{name:"show",rawName:"v-show",value:t.tmform.logoUrl,expression:"tmform.logoUrl"}],staticClass:"el-icon-delete position-icon",on:{click:function(e){return e.stopPropagation(),t.$emit("claerLogoUrl")}}})])],1),r("el-form-item")],1)},o=[],m={name:"FormTrade",props:["tmform","handleAvatarSuccess","beforeAvatarUpload"],data:function(){return{tmName:""}},watch:{tmform:{immediate:!0,handler:function(){this.tmName=this.tmform.tmName}},tmName:function(){this.$emit("changeTmName",this.tmName)}}},n=m,s=r(1001),i=(0,s.Z)(n,a,o,!1,null,"5fdb90a0",null),l=i.exports},99165:function(t,e,r){var a=r(16198);r(78975);e["Z"]={data:function(){return{imageUrl:"",tmform:{tmName:"",logoUrl:""},rules:{tmName:[{required:!0,message:"请输入名称",tigger:"blur"},{min:3,max:12,message:"长度在3 到 12 之间",tigger:"change"}],logoUrl:[{required:!0,message:"请上传logo",tigger:"change"}]}}},methods:{handleAvatarSuccess:function(t,e){200===t.code?(this.tmform.logoUrl=t.data,this.$refs.tmform.validate()):this.$message({message:"上传失败",type:"error"})},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,r=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&r},OK:function(){var t=this;return(0,a.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$refs.tmform.validate(function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(r,a){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=8;break}return e.next=3,t.$apis.trademark.reqSaveOrUpdate(t.tmform);case 3:o=e.sent,console.log(o),200===o.code?(t.$message({message:t.tmform.id?"修改成功":"保存成功",type:"success"}),"/trademark/additem"===t.$route.path?t.$router.push("/trademark"):"/trademark"===t.$route.path&&(t.visible=!1,t.getPageList())):t.$message({message:t.tmform.id?"修改失败":"保存失败",type:"error"}),e.next=9;break;case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))()},changeTmName:function(t){this.tmform.tmName=t},claerLogoUrl:function(){this.tmform.logoUrl=""}}}}}]);
//# sourceMappingURL=729-legacy.4faa6036.js.map