"use strict";(self["webpackChunkv2_htxt"]=self["webpackChunkv2_htxt"]||[]).push([[331],{52742:function(e,t,r){r.d(t,{Z:function(){return c}});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form-item",{attrs:{label:"品牌名称","label-width":"'100px'",prop:"tmName"}},[r("el-input",{staticClass:"inp",attrs:{autocomplete:"off"},model:{value:e.tmName,callback:function(t){e.tmName=t},expression:"tmName"}})],1),r("el-form-item",{attrs:{label:"品牌LOGO","label-width":"'100px'",prop:"logoUrl"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/dev-api/admin/product/fileUpload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,"list-type":"picture"}},[r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png文件, 且不超过500kb ")]),e.tmform.logoUrl?r("img",{staticClass:"avatar",attrs:{src:e.tmform.logoUrl},on:{click:function(e){e.stopPropagation()}}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),r("i",{directives:[{name:"show",rawName:"v-show",value:e.tmform.logoUrl,expression:"tmform.logoUrl"}],staticClass:"el-icon-delete position-icon",on:{click:function(t){return t.stopPropagation(),e.$emit("claerLogoUrl")}}})])],1),r("el-form-item")],1)},o=[],n={name:"FormTrade",props:["tmform","handleAvatarSuccess","beforeAvatarUpload"],data:function(){return{tmName:""}},watch:{tmform:{immediate:!0,handler:function(){this.tmName=this.tmform.tmName}},tmName:function(){this.$emit("changeTmName",this.tmName)}}},i=n,s=r(1001),l=(0,s.Z)(i,a,o,!1,null,"5fdb90a0",null),c=l.exports},83331:function(e,t,r){r.r(t),r.d(t,{default:function(){return d}});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"TradeMarkIdex"},[e.$store.state.trademark.isShow?[r("router-view")]:r("div",[r("el-button",{staticStyle:{margin:"10px 0"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.showAddTbale}},[e._v("添加")]),r("el-dialog",{attrs:{title:"修改品牌",visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[r("el-form",{ref:"tmform",staticStyle:{width:"80%"},attrs:{model:e.tmform,rules:e.rules}},[r("form-trade",{attrs:{tmform:e.tmform,handleAvatarSuccess:e.handleAvatarSuccess,beforeAvatarUpload:e.beforeAvatarUpload},on:{changeTmName:e.changeTmName,claerLogoUrl:e.claerLogoUrl}})],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.OK}},[e._v("确 定")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"",lazy:"",border:""}},[r("el-table-column",{attrs:{prop:"id",label:"序号",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.$index;return[r("span",[e._v(e._s(a+1+(e.page-1)*e.limit))])]}}])}),r("el-table-column",{attrs:{prop:"tmName",label:"品牌名称","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"logoUrl",label:"品牌LOGO"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row,a=e.$index;return[r("el-image",[r("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t.logoUrl?r("img",{key:a,staticClass:"logo_url",attrs:{src:t.logoUrl,alt:"err"}}):r("span",{staticClass:"el-icon-picture-outline"})])])]}}])}),r("el-table-column",{attrs:{prop:"timer",label:"日期"}}),r("el-table-column",{attrs:{prop:"prop",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{type:"warning",icon:"el-icon-edit",size:"mini"},on:{click:function(t){return e.undateTradeMark(a)}}},[e._v("修改")]),r("el-button",{staticClass:"delete",attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(t){return e.del(a)}}},[e._v("删除")])]}}])})],1),r("el-pagination",{staticStyle:{"margin-top":"20px","text-align":"center"},attrs:{"current-page":e.page,total:e.total,"page-size":e.limit,"pager-count":7,"page-sizes":[5,8,12],layout:"total , prev , pager, next, jumper,->,sizes"},on:{"size-change":e.sizeChange,"current-change":e.getPageList}})],1)],2)},o=[],n=r(93019),i=r(16198),s=(r(78975),r(21249),r(26699),r(32023),r(99165)),l=r(52742),c={name:"TradeMarkIdex",mixins:[s.Z],components:{FormTrade:l.Z},data:function(){return{page:1,limit:8,total:0,list:[],visible:!1}},methods:{getPageList:function(){var e=arguments,t=this;return(0,i.Z)(regeneratorRuntime.mark((function r(){var a,o,n,i,s,l,c,m;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:t.page,t.page=a,o=t.page,n=t.limit,i=t.$timer,r.next=5,t.$apis.trademark.reqTradeMarkList(o,n);case 5:s=r.sent,200===s.code&&(l=s.data,c=l.records,m=l.total,t.list=c.map((function(e,t){return e.timer=i(i().valueOf()-parseInt(1e9*Math.random())).format("L LTS"),e.tmName.includes("硅")&&(e.tmName="这是一个名字",e.logoUrl="http://47.93.148.192:8080/group1/M00/05/42/rBHu8mIz4dGATw5xAAZVHSssuyo174.jpg"),e})),t.total=m);case 7:case"end":return r.stop()}}),r)})))()},sizeChange:function(e){this.limit=e,this.getPageList()},showAddTbale:function(){this.$router.push("/trademark/additem")},undateTradeMark:function(e){this.tmform=(0,n.Z)({},e),this.visible=!0},del:function(e){var t=this;this.$confirm("是否删除该列?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((0,i.Z)(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$apis.trademark.resDelete(e.id);case 2:a=r.sent,t.$message({type:200===a.code?"success":"error",message:200===a.code?"删除成功!":"删除失败"}),200===a.code&&t.getPageList(1===t.list.length&&t.page>1?t.page-1:t.page);case 5:case"end":return r.stop()}}),r)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}},mounted:function(){this.getPageList()}},m=c,u=r(1001),p=(0,u.Z)(m,a,o,!1,null,"78b750b7",null),d=p.exports},99165:function(e,t,r){var a=r(16198);r(78975);t["Z"]={data:function(){return{imageUrl:"",tmform:{tmName:"",logoUrl:""},rules:{tmName:[{required:!0,message:"请输入名称",tigger:"blur"},{min:3,max:12,message:"长度在3 到 12 之间",tigger:"change"}],logoUrl:[{required:!0,message:"请上传logo",tigger:"change"}]}}},methods:{handleAvatarSuccess:function(e,t){200===e.code?(this.tmform.logoUrl=e.data,this.$refs.tmform.validate()):this.$message({message:"上传失败",type:"error"})},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,r=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&r},OK:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.tmform.validate(function(){var t=(0,a.Z)(regeneratorRuntime.mark((function t(r,a){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return t.next=3,e.$apis.trademark.reqSaveOrUpdate(e.tmform);case 3:o=t.sent,console.log(o),200===o.code?(e.$message({message:e.tmform.id?"修改成功":"保存成功",type:"success"}),"/trademark/additem"===e.$route.path?e.$router.push("/trademark"):"/trademark"===e.$route.path&&(e.visible=!1,e.getPageList())):e.$message({message:e.tmform.id?"修改失败":"保存失败",type:"error"}),t.next=9;break;case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},changeTmName:function(e){this.tmform.tmName=e},claerLogoUrl:function(){this.tmform.logoUrl=""}}}}}]);
//# sourceMappingURL=331-legacy.a5bbf501.js.map