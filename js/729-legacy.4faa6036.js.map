{"version":3,"file":"js/729-legacy.4faa6036.js","mappings":"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","sources":["webpack://v2_htxt/./src/views/product/trademark/AddItem.vue?14fb","webpack://v2_htxt/src/views/product/trademark/AddItem.vue","webpack://v2_htxt/./src/views/product/trademark/AddItem.vue?03ee","webpack://v2_htxt/./src/views/product/trademark/AddItem.vue","webpack://v2_htxt/./src/views/product/trademark/components/formtrade.vue?273e","webpack://v2_htxt/src/views/product/trademark/components/formtrade.vue","webpack://v2_htxt/./src/views/product/trademark/components/formtrade.vue?ffe3","webpack://v2_htxt/./src/views/product/trademark/components/formtrade.vue","webpack://v2_htxt/./src/views/product/trademark/mixin/PinaiMixin.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h3',[_vm._v(\"添加品牌\")]),_c('div',{staticClass:\"add-pinpai\"},[_c('div',{staticClass:\"footer\"},[_c('el-form',{ref:\"tmform\",staticStyle:{\"width\":\"80%\"},attrs:{\"model\":_vm.tmform,\"rules\":_vm.rules}},[_c('form-trade',{attrs:{\"tmform\":_vm.tmform,\"handleAvatarSuccess\":_vm.handleAvatarSuccess,\"beforeAvatarUpload\":_vm.beforeAvatarUpload},on:{\"changeTmName\":_vm.changeTmName,\"claerLogoUrl\":_vm.claerLogoUrl}})],1),_c('el-button',{on:{\"click\":_vm.back}},[_vm._v(\"返 回\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.OK}},[_vm._v(\"确 定\")])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <h3>添加品牌</h3>\r\n    <div class=\"add-pinpai\">\r\n      <div class=\"footer\">\r\n        <el-form style=\"width: 80%\" ref=\"tmform\" :model=\"tmform\" :rules=\"rules\">\r\n          <form-trade\r\n            :tmform=\"tmform\"\r\n            :handleAvatarSuccess=\"handleAvatarSuccess\"\r\n            :beforeAvatarUpload=\"beforeAvatarUpload\"\r\n            @changeTmName=\"changeTmName\"\r\n            @claerLogoUrl=\"claerLogoUrl\"\r\n          />\r\n        </el-form>\r\n        <el-button @click=\"back\">返 回</el-button>\r\n        <el-button type=\"primary\" @click=\"OK\">确 定</el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport PinaiMixin from './mixin/PinaiMixin'\r\nimport FormTrade from './components/formtrade'\r\nexport default {\r\n  name: 'AddItem',\r\n  props: ['a'],\r\n  mixins: [PinaiMixin],\r\n  components: { FormTrade },\r\n  data () {\r\n    return {\r\n      timeout: null\r\n    }\r\n  },\r\n  methods: {\r\n    back () {\r\n      this.$router.push('/trademark')\r\n    },\r\n    // 修改 this.tmform.tmName\r\n    changeTmName (tmName) {\r\n      this.tmform.tmName = tmName\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    tmform: {\r\n      deep: true,\r\n      handler: function () {\r\n        // 防抖\r\n        clearTimeout(this.timeout)\r\n        this.timeout = setTimeout(() => {\r\n          localStorage.tmform = JSON.stringify(this.tmform)\r\n        }, 800)\r\n      }\r\n    }\r\n  },\r\n\r\n  beforeRouteEnter (to, form, next) {\r\n    next((vm) => {\r\n      vm.tmform = localStorage.tmform ? JSON.parse(localStorage.tmform) : vm.tmform\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n.add-pinpai {\r\n  margin: 30px;\r\n}\r\n.footer {\r\n  margin-left: 60px;\r\n  margin-top: 80px;\r\n  .el-button {\r\n    margin-left: 20px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AddItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AddItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AddItem.vue?vue&type=template&id=397b004a&scoped=true&\"\nimport script from \"./AddItem.vue?vue&type=script&lang=js&\"\nexport * from \"./AddItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AddItem.vue?vue&type=style&index=0&id=397b004a&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"397b004a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-form-item',{attrs:{\"label\":\"品牌名称\",\"label-width\":\"'100px'\",\"prop\":\"tmName\"}},[_c('el-input',{staticClass:\"inp\",attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.tmName),callback:function ($$v) {_vm.tmName=$$v},expression:\"tmName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"品牌LOGO\",\"label-width\":\"'100px'\",\"prop\":\"logoUrl\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"/dev-api/admin/product/fileUpload\",\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload,\"list-type\":\"picture\"}},[_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\" 只能上传jpg/png文件, 且不超过500kb \")]),(_vm.tmform.logoUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.tmform.logoUrl},on:{\"click\":function($event){$event.stopPropagation();}}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"}),_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tmform.logoUrl),expression:\"tmform.logoUrl\"}],staticClass:\"el-icon-delete position-icon\",on:{\"click\":function($event){$event.stopPropagation();return _vm.$emit('claerLogoUrl')}}})])],1),_c('el-form-item')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!-- <el-form style=\"width: 80%\" ref=\"tmform\" :model=\"tmform\" > -->\r\n  <div>\r\n    <el-form-item label=\"品牌名称\" label-width=\"'100px'\" prop=\"tmName\">\r\n      <el-input autocomplete=\"off\" v-model=\"tmName\" class=\"inp\"></el-input>\r\n    </el-form-item>\r\n\r\n    <el-form-item label=\"品牌LOGO\" label-width=\"'100px'\" prop=\"logoUrl\">\r\n      <el-upload\r\n        class=\"avatar-uploader\"\r\n        action=\"/dev-api/admin/product/fileUpload\"\r\n        :show-file-list=\"false\"\r\n        :on-success=\"handleAvatarSuccess\"\r\n        :before-upload=\"beforeAvatarUpload\"\r\n        list-type=\"picture\"\r\n      >\r\n        <div slot=\"tip\" class=\"el-upload__tip\">\r\n          只能上传jpg/png文件, 且不超过500kb\r\n        </div>\r\n        <img\r\n          v-if=\"tmform.logoUrl\"\r\n          @click.stop=\"\"\r\n          :src=\"tmform.logoUrl\"\r\n          class=\"avatar\"\r\n        />\r\n        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n        <i\r\n          v-show=\"tmform.logoUrl\"\r\n          @click.stop=\"$emit('claerLogoUrl')\"\r\n          class=\"el-icon-delete position-icon\"\r\n        ></i>\r\n      </el-upload>\r\n    </el-form-item>\r\n    <el-form-item> </el-form-item>\r\n  </div>\r\n  <!-- </el-form> -->\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'FormTrade',\r\n  props: ['tmform', 'handleAvatarSuccess', 'beforeAvatarUpload'],\r\n  data () {\r\n    return {\r\n      tmName: ''\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    // 修改v-model的属性\r\n    tmform: {\r\n      immediate: true,\r\n      handler: function () {\r\n        this.tmName = this.tmform.tmName\r\n      }\r\n    },\r\n    tmName () {\r\n      this.$emit('changeTmName', this.tmName)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style  lang='less' scoped>\r\n.avatar-uploader {\r\n  .el-upload--picture {\r\n    .position-icon {\r\n      position: absolute;\r\n      top: 10px;\r\n      right: 10px;\r\n      color: #ffffff;\r\n      z-index: 9999;\r\n      opacity: 0;\r\n      transform: scale(1.15);\r\n      &:hover {\r\n        color: red;\r\n      }\r\n    }\r\n    &:hover .position-icon {\r\n      transition: 0.5s;\r\n      opacity: 1;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./formtrade.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./formtrade.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./formtrade.vue?vue&type=template&id=5fdb90a0&scoped=true&\"\nimport script from \"./formtrade.vue?vue&type=script&lang=js&\"\nexport * from \"./formtrade.vue?vue&type=script&lang=js&\"\nimport style0 from \"./formtrade.vue?vue&type=style&index=0&id=5fdb90a0&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5fdb90a0\",\n  null\n  \n)\n\nexport default component.exports","\r\nexport default {\r\n  data () {\r\n    // const validateLogo = (rule, value, callback) => {\r\n    //   console.log(rule, value, callback)\r\n    //   callback()\r\n    // }\r\n    return {\r\n      imageUrl: '',\r\n      tmform: { // form 收集表单属性\r\n        tmName: '',\r\n        logoUrl: ''\r\n      },\r\n      rules: {\r\n        tmName: [\r\n          { required: true, message: '请输入名称', tigger: 'blur' },\r\n          { min: 3, max: 12, message: '长度在3 到 12 之间', tigger: 'change' }\r\n        ],\r\n        logoUrl: [\r\n          { required: true, message: '请上传logo', tigger: 'change' }\r\n          // { required: true, validator: validateLogo, tigger: 'change' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    // 上传成功\r\n    handleAvatarSuccess (res, file) {\r\n      if (res.code === 200) {\r\n        this.tmform.logoUrl = res.data\r\n        this.$refs.tmform.validate()\r\n      } else {\r\n        this.$message({\r\n          message: '上传失败',\r\n          type: 'error'\r\n        })\r\n      }\r\n    },\r\n    // 上传之前\r\n    beforeAvatarUpload (file) {\r\n      const isJPG = file.type === 'image/jpeg'\r\n      const isLt2M = file.size / 1024 / 1024 < 2\r\n\r\n      if (!isJPG) {\r\n        this.$message.error('上传头像图片只能是 JPG 格式!')\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error('上传头像图片大小不能超过 2MB!')\r\n      }\r\n      return isJPG && isLt2M\r\n    },\r\n    // 保存\r\n    async OK () {\r\n      this.$refs.tmform.validate(async (bol, obj) => {\r\n        if (bol) {\r\n          const result = await this.$apis.trademark.reqSaveOrUpdate(this.tmform)\r\n          console.log(result)\r\n          if (result.code === 200) {\r\n            this.$message({\r\n              message: !this.tmform.id ? '保存成功' : '修改成功',\r\n              type: 'success'\r\n            })\r\n            if (this.$route.path === '/trademark/additem') {\r\n              this.$router.push('/trademark')\r\n            } else if (this.$route.path === '/trademark') {\r\n              this.visible = false\r\n              // 调用接口 刷新列表\r\n              this.getPageList()\r\n            }\r\n          } else {\r\n            this.$message({\r\n              message: !this.tmform.id ? '保存失败' : '修改失败',\r\n              type: 'error'\r\n            })\r\n          }\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    changeTmName (tmName) {\r\n      this.tmform.tmName = tmName\r\n    },\r\n    claerLogoUrl () { // 清除图片\r\n      this.tmform.logoUrl = ''\r\n    }\r\n  }\r\n}\r\n/**\r\n *\r\n */\r\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","staticClass","ref","staticStyle","attrs","tmform","rules","handleAvatarSuccess","beforeAvatarUpload","on","changeTmName","claerLogoUrl","back","OK","staticRenderFns","name","props","mixins","components","FormTrade","data","timeout","methods","$router","push","tmName","watch","deep","handler","clearTimeout","setTimeout","localStorage","JSON","stringify","beforeRouteEnter","to","form","next","vm","parse","component","model","value","callback","$$v","expression","slot","logoUrl","$event","stopPropagation","directives","rawName","$emit","immediate","imageUrl","required","message","tigger","min","max","res","file","code","$refs","validate","$message","type","isJPG","isLt2M","size","error","bol","obj","$apis","trademark","reqSaveOrUpdate","result","console","log","id","$route","path","visible","getPageList"],"sourceRoot":""}