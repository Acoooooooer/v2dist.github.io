{"version":3,"file":"js/756.3a8c724d.js","mappings":"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","sources":["webpack://v2_htxt/./src/views/product/attr/index.vue?e94f","webpack://v2_htxt/src/views/product/attr/index.vue","webpack://v2_htxt/./src/views/product/attr/index.vue?1401","webpack://v2_htxt/./src/views/product/attr/index.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"AttrIdex\"},[_c('el-card',[_c('card-three-select',{attrs:{\"disabled\":_vm.isShowTable},on:{\"getShopId\":_vm.getShopId}})],1),_c('el-card',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isShowTable),expression:\"!isShowTable\"}],key:\"1\"},[_c('el-form',{ref:\"attrInfoadd\",attrs:{\"inline\":true,\"model\":_vm.attrInfo,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"属性名\",\"prop\":\"attrName\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入属性名\"},model:{value:(_vm.attrInfo.attrName),callback:function ($$v) {_vm.$set(_vm.attrInfo, \"attrName\", $$v)},expression:\"attrInfo.attrName\"}},[_vm._v(\"++\")])],1)],1),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\",\"disabled\":(!_vm.attrInfo.attrName)},on:{\"click\":_vm.add}},[_vm._v(\"添加属性值\")]),_c('el-button',{on:{\"click\":_vm.back}},[_vm._v(\"取 消\")]),_c('el-form',{ref:\"attrInfotab\",attrs:{\"model\":_vm.attrInfo},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('el-form-item',{attrs:{\"prop\":\"attrValueList\"}},[_c('el-table',{staticStyle:{\"margin\":\"20px 0\"},attrs:{\"border\":\"\",\"data\":_vm.attrInfo.attrValueList,\"stripe\":\"\"}},_vm._l((4),function(v,i){return _c('el-table-column',{key:(\"\" + i),attrs:{\"prop\":_vm.cTabadd.tableProp[i],\"label\":_vm.cTabadd.tableLabel[i],\"width\":_vm.cTabadd.tableWidth[i],\"align\":i === 0 ? 'center' : ''},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nvar $index = ref.$index;\nreturn [(_vm.cTabadd.tableProp[i] === 'id')?_c('span',[_vm._v(_vm._s($index + 1))]):_vm._e(),(_vm.cTabadd.tableProp[i] === 'attrName')?_c('span',[(!row.flag)?_c('span',{staticClass:\"span_vlaue\",on:{\"click\":function($event){row.flag = true}}},[_vm._v(_vm._s(row.valueName))]):_vm._e(),(row.flag)?_c('el-input',{directives:[{name:\"focus\",rawName:\"v-focus\",value:(row),expression:\"row\"}],ref:'inp' + $index,refInFor:true,attrs:{\"placeholder\":\"请输入属性值名称\",\"size\":\"mini\"},on:{\"blur\":function($event){return _vm.blur(row)}},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }row.flag = false}},model:{value:(row.valueName),callback:function ($$v) {_vm.$set(row, \"valueName\", $$v)},expression:\"row.valueName\"}}):_vm._e()],1):_vm._e(),(_vm.cTabadd.tableProp[i] === 'timer')?_c('span',[_vm._v(_vm._s(row.timer))]):_vm._e(),(_vm.cTabadd.tableProp[i] === 'active')?_c('div',[_c('el-popconfirm',{attrs:{\"confirm-button-text\":\"好的\",\"cancel-button-text\":\"不用了\",\"icon\":\"el-icon-info\",\"icon-color\":\"red\",\"title\":(\"确定删除 \" + (row.valueName) + \" 吗?\")},on:{\"confirm\":function($event){return _vm.delvalue($index)}}},[_c('el-button',{attrs:{\"slot\":\"reference\",\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},slot:\"reference\"},[_vm._v(\"删除\")])],1)],1):_vm._e()]}}],null,true)})}),1),_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":!_vm.attrInfo.attrValueList.length},on:{\"click\":_vm.saveOnce}},[_vm._v(\"保存\")]),_c('el-button',{on:{\"click\":_vm.back}},[_vm._v(\"取消\")]),_vm._v(\" \"+_vm._s(_vm.attrInfo.attrValueList.length)+\"条 \")],1)],1)],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowTable),expression:\"isShowTable\"}],key:\"2\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\",\"disabled\":!_vm.cForm.category3Id},on:{\"click\":_vm.attrInfoHandle}},[_vm._v(\"添加属性\")]),_c('el-table',{staticStyle:{\"width\":\"100%\",\"margin-top\":\"10px\"},attrs:{\"empty-text\":\"暂无数据，请选择分类类型\",\"border\":\"\",\"data\":_vm.cTable.attrList,\"stripe\":\"\"}},_vm._l((5),function(v,i){return _c('el-table-column',{key:(\"\" + (v.attrName) + i),attrs:{\"prop\":_vm.cTable.tableProp[i],\"label\":_vm.cTable.tableLabel[i],\"width\":_vm.cTable.tableWidth[i],\"align\":i === 0 ? 'center' : ''},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nvar $index = ref.$index;\nreturn [(_vm.cTable.tableProp[i] === 'id')?_c('span',[_vm._v(_vm._s($index + 1))]):_vm._e(),(_vm.cTable.tableProp[i] === 'attrName')?_c('span',[_vm._v(_vm._s(row.attrName))]):_vm._e(),(_vm.cTable.tableProp[i] === 'attrValueList')?_c('div',_vm._l((row.attrValueList),function(val,inx){return _c('el-tag',{key:(\"\" + (val.valueName) + inx),staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":_vm._f(\"type\")(_vm.cTable.typeList)}},[_vm._v(_vm._s(val.valueName))])}),1):_vm._e(),(_vm.cTable.tableProp[i] === 'timer')?_c('span',[_vm._v(_vm._s(row.timer))]):_vm._e(),(_vm.cTable.tableProp[i] === 'active')?_c('div',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.changeAttr(row)}}},[_vm._v(\"修改\")]),_c('el-popconfirm',{attrs:{\"confirm-button-text\":\"好的\",\"cancel-button-text\":\"不用了\",\"icon\":\"el-icon-info\",\"icon-color\":\"red\",\"title\":(\"确定删除 \" + (row.attrName) + \" 吗?\")},on:{\"confirm\":function($event){return _vm.deleteAttr(row)}}},[_c('el-button',{staticStyle:{\"margin-left\":\"15px\"},attrs:{\"slot\":\"reference\",\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},slot:\"reference\"},[_vm._v(\"删除\")])],1)],1):_vm._e()]}}],null,true)})}),1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"AttrIdex\">\r\n    <el-card>\r\n      <card-three-select @getShopId=\"getShopId\" :disabled=\"isShowTable\"></card-three-select>\r\n    </el-card>\r\n\r\n    <el-card>\r\n      <!-- <transition-group name=\"breadcrumb\"> -->\r\n      <!-- 添加的数据 -->\r\n      <div v-show=\"!isShowTable\" key=\"1\">\r\n        <el-form :inline=\"true\" :model=\"attrInfo\" ref=\"attrInfoadd\" label-width=\"80px\">\r\n          <el-form-item label=\"属性名\" prop=\"attrName\">\r\n            <el-input placeholder=\"请输入属性名\" v-model=\"attrInfo.attrName\">++</el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <el-button\r\n          type=\"primary\"\r\n          icon=\"el-icon-plus\"\r\n          @click=\"add\"\r\n          :disabled=\"(!attrInfo.attrName)\"\r\n        >添加属性值</el-button>\r\n        <el-button @click=\"back\">取 消</el-button>\r\n\r\n        <!-- 表格 -->\r\n        <el-form :model=\"attrInfo\" ref=\"attrInfotab\" @submit.native.prevent>\r\n          <el-form-item prop=\"attrValueList\">\r\n            <el-table border style=\"margin:20px 0\" :data=\"attrInfo.attrValueList\" stripe>\r\n              <el-table-column\r\n                v-for=\"(v, i) in 4\"\r\n                :key=\"`${i}`\"\r\n                :prop=\"cTabadd.tableProp[i]\"\r\n                :label=\"cTabadd.tableLabel[i]\"\r\n                :width=\"cTabadd.tableWidth[i]\"\r\n                :align=\"i === 0 ? 'center' : ''\"\r\n              >\r\n                <template slot-scope=\"{ row, $index }\">\r\n                  <!--  -->\r\n                  <span v-if=\"cTabadd.tableProp[i] === 'id'\">{{ $index + 1 }}</span>\r\n                  <!--  -->\r\n                  <span v-if=\"cTabadd.tableProp[i] === 'attrName'\">\r\n                    <!--  -->\r\n                    <span\r\n                      class=\"span_vlaue\"\r\n                      @click=\"row.flag = true\"\r\n                      v-if=\"!row.flag\"\r\n                    >{{ row.valueName }}</span>\r\n                    <el-input\r\n                      v-if=\"row.flag\"\r\n                      placeholder=\"请输入属性值名称\"\r\n                      v-focus=\"row\"\r\n                      v-model=\"row.valueName\"\r\n                      :ref=\"'inp' + $index\"\r\n                      size=\"mini\"\r\n                      @blur=\"blur(row)\"\r\n                      @keyup.native.enter=\"row.flag = false\"\r\n                    ></el-input>\r\n                  </span>\r\n                  <!--  -->\r\n                  <span v-if=\"cTabadd.tableProp[i] === 'timer'\">{{ row.timer }}</span>\r\n                  <!-- 删除 -->\r\n                  <div v-if=\"cTabadd.tableProp[i] === 'active'\">\r\n                    <el-popconfirm\r\n                      confirm-button-text=\"好的\"\r\n                      cancel-button-text=\"不用了\"\r\n                      icon=\"el-icon-info\"\r\n                      icon-color=\"red\"\r\n                      :title=\"`确定删除 ${row.valueName} 吗?`\"\r\n                      @confirm=\"delvalue($index)\"\r\n                    >\r\n                      <el-button slot=\"reference\" type=\"danger\" icon=\"el-icon-delete\" size=\"mini\">删除</el-button>\r\n                    </el-popconfirm>\r\n                  </div>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n            <!-- 保存  取消 -->\r\n            <el-button\r\n              type=\"primary\"\r\n              @click=\"saveOnce\"\r\n              :disabled=\"!attrInfo.attrValueList.length\"\r\n            >保存</el-button>\r\n            <el-button @click=\"back\">取消</el-button>\r\n            <!--  -->\r\n            {{ attrInfo.attrValueList.length }}条\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n\r\n      <!-- 三级联动获取到的数据 -->\r\n      <div v-show=\"isShowTable\" key=\"2\">\r\n        <el-button\r\n          type=\"primary\"\r\n          icon=\"el-icon-plus\"\r\n          :disabled=\"!cForm.category3Id\"\r\n          @click=\"attrInfoHandle\"\r\n        >添加属性</el-button>\r\n\r\n        <!-- 表格 -->\r\n        <el-table\r\n          empty-text=\"暂无数据，请选择分类类型\"\r\n          style=\"width:100%;margin-top: 10px;\"\r\n          border\r\n          :data=\"cTable.attrList\"\r\n          stripe\r\n        >\r\n          <el-table-column\r\n            v-for=\"(v, i) in 5\"\r\n            :key=\"`${v.attrName}${i}`\"\r\n            :prop=\"cTable.tableProp[i]\"\r\n            :label=\"cTable.tableLabel[i]\"\r\n            :width=\"cTable.tableWidth[i]\"\r\n            :align=\"i === 0 ? 'center' : ''\"\r\n          >\r\n            <template slot-scope=\"{ row, $index }\">\r\n              <!--  -->\r\n              <span v-if=\"cTable.tableProp[i] === 'id'\">{{ $index + 1 }}</span>\r\n              <!--  -->\r\n              <span v-if=\"cTable.tableProp[i] === 'attrName'\">{{ row.attrName }}</span>\r\n              <!--  -->\r\n              <div v-if=\"cTable.tableProp[i] === 'attrValueList'\">\r\n                <el-tag\r\n                  v-for=\"(val, inx) in row.attrValueList\"\r\n                  :key=\"`${val.valueName}${inx}`\"\r\n                  style=\"margin-left: 10px;\"\r\n                  :type=\"cTable.typeList | type\"\r\n                >{{ val.valueName }}</el-tag>\r\n              </div>\r\n              <!--  -->\r\n              <span v-if=\"cTable.tableProp[i] === 'timer'\">{{ row.timer }}</span>\r\n              <!--  -->\r\n              <div v-if=\"cTable.tableProp[i] === 'active'\">\r\n                <!-- 修改 -->\r\n                <el-button\r\n                  type=\"primary\"\r\n                  icon=\"el-icon-edit\"\r\n                  size=\"mini\"\r\n                  @click=\"changeAttr(row)\"\r\n                >修改</el-button>\r\n                <!-- 删除 -->\r\n                <el-popconfirm\r\n                  confirm-button-text=\"好的\"\r\n                  cancel-button-text=\"不用了\"\r\n                  icon=\"el-icon-info\"\r\n                  icon-color=\"red\"\r\n                  :title=\"`确定删除 ${row.attrName} 吗?`\"\r\n                  @confirm=\"deleteAttr(row)\"\r\n                >\r\n                  <el-button\r\n                    slot=\"reference\"\r\n                    type=\"danger\"\r\n                    icon=\"el-icon-delete\"\r\n                    size=\"mini\"\r\n                    style=\"margin-left:15px\"\r\n                  >删除</el-button>\r\n                </el-popconfirm>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n      <!-- </transition-group> -->\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'AttrIdex',\r\n  data () {\r\n    return {\r\n      cForm: {\r\n        category1Id: '',\r\n        category2Id: '',\r\n        category3Id: ''\r\n      },\r\n      cTable: {\r\n        tableLabel: ['序号', '属性值名称', '属性值列表', '日期', '操作'],\r\n        tableWidth: [100, 280, '', 200, 300],\r\n        tableProp: ['id', 'attrName', 'attrValueList', 'timer', 'active'],\r\n        typeList: ['success', 'info', 'warning', 'danger'],\r\n        attrList: [] // 数据列表\r\n      },\r\n      cTabadd: {\r\n        tableLabel: ['序号', '属性值名称', '日期', '操作'],\r\n        tableWidth: [100, '', 200, 300],\r\n        tableProp: ['id', 'attrName', 'timer', 'active']\r\n      },\r\n      attrInfo: {\r\n        attrName: '', // 属性名\r\n        attrValueList: [ // 属性值\r\n          // {\r\n          //   attrId: 0, // 相应属性名的id\r\n          //   valueName: ''\r\n          // }\r\n        ],\r\n        categoryId: 0, // 三级分类id\r\n        categoryLevel: 3\r\n      },\r\n      isShowTable: true\r\n    }\r\n  },\r\n  directives: {\r\n    focus: { // input获焦\r\n      inserted (el, binding, vnode) {\r\n        el.children[0].focus()\r\n        vnode.context.isFocus = false\r\n      }\r\n\r\n    }\r\n  },\r\n  methods: {\r\n    // 获取三级列表的id  =>  cForm\r\n    getShopId (idList) {\r\n      this.cForm = { ...idList }\r\n      this.getAttrList()\r\n    },\r\n    // 通过三级id获取相关数据\r\n    async getAttrList () {\r\n      const result = await this.$apis.attr.getAttrList(this.cForm)\r\n      if (result.code === 200) {\r\n        this.cTable.attrList = result.data.map((v, i) => {\r\n          v.timer = this.$timer(\r\n            this.$timer().valueOf() - parseInt(Math.random() * 1000000000)\r\n          ).format('L LTS')\r\n          return v\r\n        })\r\n      }\r\n    },\r\n    // 第一个页面的添加属性\r\n    attrInfoHandle () {\r\n      this.isShowTable = false\r\n\r\n      // 清除add页面列表数据\r\n      this.$refs.attrInfoadd.resetFields()\r\n      this.$refs.attrInfotab.resetFields()\r\n\r\n      this.attrInfo.categoryId = this.cForm.category3Id\r\n    },\r\n    // 修改按钮\r\n    changeAttr (row) {\r\n      this.isShowTable = false\r\n      this.isFocus = true\r\n\r\n      this.attrInfo = this.$lds.cloneDeepWith(row, (a, b, c) => {\r\n        if (typeof b === 'number') {\r\n          a.timer = row.timer\r\n          a.flag = false\r\n        }\r\n      })\r\n    },\r\n    // 添加属性值\r\n    add () {\r\n      this.attrInfo.attrValueList.push({\r\n        attrId: this.attrInfo.id,\r\n        timer: this.$timer().format('L LTS'),\r\n        flag: true,\r\n        valueName: ''\r\n      })\r\n    },\r\n    // 返回\r\n    back () {\r\n      this.isShowTable = true\r\n      this.$nextTick(() => {\r\n        this.$message.closeAll()\r\n      })\r\n    },\r\n\r\n    // 失焦\r\n    blur (row) {\r\n      if (!row.valueName.trim()) {\r\n        this.$message('不能为空')\r\n        return\r\n      }\r\n      const isflag = this.attrInfo.attrValueList.some(v => {\r\n        if (row !== v) {\r\n          return v.valueName === row.valueName\r\n        }\r\n        return false\r\n      })\r\n      if (isflag) {\r\n        this.$message('不能重复')\r\n        return\r\n      }\r\n      row.flag = false\r\n    },\r\n    delvalue (i) {\r\n      this.attrInfo.attrValueList.splice(i, 1)\r\n      this.$nextTick(() => {\r\n        this.$message.closeAll()\r\n      })\r\n    },\r\n    // 修改属性 或 添加属性\r\n    async saveOnce () {\r\n      // 过滤\r\n      this.attrInfo.attrValueList = this.attrInfo.attrValueList.filter(v => v.valueName.trim())\r\n      const result = await this.$apis.attr.saveAttrInfo(this.attrInfo)\r\n      if (result.code === 200 && result.ok) {\r\n        this.getAttrList()\r\n        this.isShowTable = true\r\n\r\n        this.$nextTick(() => {\r\n          this.$message.closeAll()\r\n\r\n          this.$message({ message: '成功', type: 'success' })\r\n        })\r\n      }\r\n    },\r\n    // 删除Attr\r\n    async deleteAttr (row) {\r\n      const result = await this.$apis.attr.deleteAttr(row.id)\r\n      console.log(result)\r\n      if (result.code === 200 && result.ok) {\r\n        this.getAttrList()\r\n      }\r\n    }\r\n  },\r\n  filters: {\r\n    type (v) {\r\n      return v[parseInt(Math.random() * 5)]\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style lang='less' scoped>\r\n.AttrIdex {\r\n  .el-card {\r\n    margin: 20px 0;\r\n  }\r\n  .span_vlaue {\r\n    display: block;\r\n    cursor: pointer;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=eff96e86&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=eff96e86&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"eff96e86\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","isShowTable","on","getShopId","directives","name","rawName","value","expression","key","ref","attrInfo","model","callback","$$v","$set","_v","attrName","add","back","nativeOn","$event","preventDefault","staticStyle","attrValueList","_l","v","i","cTabadd","tableProp","tableLabel","tableWidth","scopedSlots","_u","fn","row","$index","_s","_e","flag","valueName","refInFor","blur","type","indexOf","_k","keyCode","timer","delvalue","slot","length","saveOnce","cForm","category3Id","attrInfoHandle","cTable","attrList","val","inx","_f","typeList","changeAttr","deleteAttr","staticRenderFns","data","category1Id","category2Id","categoryId","categoryLevel","focus","inserted","el","children","vnode","context","isFocus","methods","idList","getAttrList","async","result","$apis","attr","code","map","$timer","format","$refs","attrInfoadd","resetFields","attrInfotab","$lds","cloneDeepWith","a","b","c","push","attrId","id","$nextTick","$message","closeAll","trim","isflag","some","splice","filter","saveAttrInfo","ok","message","console","log","filters","parseInt","Math","random","component"],"sourceRoot":""}