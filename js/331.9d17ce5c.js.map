{"version":3,"file":"js/331.9d17ce5c.js","mappings":"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","sources":["webpack://v2_htxt/./src/views/product/trademark/components/formtrade.vue?273e","webpack://v2_htxt/src/views/product/trademark/components/formtrade.vue","webpack://v2_htxt/./src/views/product/trademark/components/formtrade.vue?ffe3","webpack://v2_htxt/./src/views/product/trademark/components/formtrade.vue","webpack://v2_htxt/./src/views/product/trademark/index.vue?3b9e","webpack://v2_htxt/src/views/product/trademark/index.vue","webpack://v2_htxt/./src/views/product/trademark/index.vue?9545","webpack://v2_htxt/./src/views/product/trademark/index.vue","webpack://v2_htxt/./src/views/product/trademark/mixin/PinaiMixin.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-form-item',{attrs:{\"label\":\"品牌名称\",\"label-width\":\"'100px'\",\"prop\":\"tmName\"}},[_c('el-input',{staticClass:\"inp\",attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.tmName),callback:function ($$v) {_vm.tmName=$$v},expression:\"tmName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"品牌LOGO\",\"label-width\":\"'100px'\",\"prop\":\"logoUrl\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"/dev-api/admin/product/fileUpload\",\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload,\"list-type\":\"picture\"}},[_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\" 只能上传jpg/png文件, 且不超过500kb \")]),(_vm.tmform.logoUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.tmform.logoUrl},on:{\"click\":function($event){$event.stopPropagation();}}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"}),_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tmform.logoUrl),expression:\"tmform.logoUrl\"}],staticClass:\"el-icon-delete position-icon\",on:{\"click\":function($event){$event.stopPropagation();return _vm.$emit('claerLogoUrl')}}})])],1),_c('el-form-item')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!-- <el-form style=\"width: 80%\" ref=\"tmform\" :model=\"tmform\" > -->\r\n  <div>\r\n    <el-form-item label=\"品牌名称\" label-width=\"'100px'\" prop=\"tmName\">\r\n      <el-input autocomplete=\"off\" v-model=\"tmName\" class=\"inp\"></el-input>\r\n    </el-form-item>\r\n\r\n    <el-form-item label=\"品牌LOGO\" label-width=\"'100px'\" prop=\"logoUrl\">\r\n      <el-upload\r\n        class=\"avatar-uploader\"\r\n        action=\"/dev-api/admin/product/fileUpload\"\r\n        :show-file-list=\"false\"\r\n        :on-success=\"handleAvatarSuccess\"\r\n        :before-upload=\"beforeAvatarUpload\"\r\n        list-type=\"picture\"\r\n      >\r\n        <div slot=\"tip\" class=\"el-upload__tip\">\r\n          只能上传jpg/png文件, 且不超过500kb\r\n        </div>\r\n        <img\r\n          v-if=\"tmform.logoUrl\"\r\n          @click.stop=\"\"\r\n          :src=\"tmform.logoUrl\"\r\n          class=\"avatar\"\r\n        />\r\n        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n        <i\r\n          v-show=\"tmform.logoUrl\"\r\n          @click.stop=\"$emit('claerLogoUrl')\"\r\n          class=\"el-icon-delete position-icon\"\r\n        ></i>\r\n      </el-upload>\r\n    </el-form-item>\r\n    <el-form-item> </el-form-item>\r\n  </div>\r\n  <!-- </el-form> -->\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'FormTrade',\r\n  props: ['tmform', 'handleAvatarSuccess', 'beforeAvatarUpload'],\r\n  data () {\r\n    return {\r\n      tmName: ''\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    // 修改v-model的属性\r\n    tmform: {\r\n      immediate: true,\r\n      handler: function () {\r\n        this.tmName = this.tmform.tmName\r\n      }\r\n    },\r\n    tmName () {\r\n      this.$emit('changeTmName', this.tmName)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style  lang='less' scoped>\r\n.avatar-uploader {\r\n  .el-upload--picture {\r\n    .position-icon {\r\n      position: absolute;\r\n      top: 10px;\r\n      right: 10px;\r\n      color: #ffffff;\r\n      z-index: 9999;\r\n      opacity: 0;\r\n      transform: scale(1.15);\r\n      &:hover {\r\n        color: red;\r\n      }\r\n    }\r\n    &:hover .position-icon {\r\n      transition: 0.5s;\r\n      opacity: 1;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./formtrade.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./formtrade.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./formtrade.vue?vue&type=template&id=5fdb90a0&scoped=true&\"\nimport script from \"./formtrade.vue?vue&type=script&lang=js&\"\nexport * from \"./formtrade.vue?vue&type=script&lang=js&\"\nimport style0 from \"./formtrade.vue?vue&type=style&index=0&id=5fdb90a0&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5fdb90a0\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"TradeMarkIdex\"},[(_vm.$store.state.trademark.isShow)?[_c('router-view')]:_c('div',[_c('el-button',{staticStyle:{\"margin\":\"10px 0\"},attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.showAddTbale}},[_vm._v(\"添加\")]),_c('el-dialog',{attrs:{\"title\":\"修改品牌\",\"visible\":_vm.visible},on:{\"update:visible\":function($event){_vm.visible=$event}}},[_c('el-form',{ref:\"tmform\",staticStyle:{\"width\":\"80%\"},attrs:{\"model\":_vm.tmform,\"rules\":_vm.rules}},[_c('form-trade',{attrs:{\"tmform\":_vm.tmform,\"handleAvatarSuccess\":_vm.handleAvatarSuccess,\"beforeAvatarUpload\":_vm.beforeAvatarUpload},on:{\"changeTmName\":_vm.changeTmName,\"claerLogoUrl\":_vm.claerLogoUrl}})],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.visible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.OK}},[_vm._v(\"确 定\")])],1)],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.list,\"stripe\":\"\",\"lazy\":\"\",\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"序号\",\"width\":\"100\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar $index = ref.$index;\nreturn [_c('span',[_vm._v(_vm._s($index + 1 + (_vm.page - 1) * _vm.limit))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"tmName\",\"label\":\"品牌名称\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"logoUrl\",\"label\":\"品牌LOGO\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nvar $index = ref.$index;\nreturn [_c('el-image',[_c('div',{staticClass:\"image-slot\",attrs:{\"slot\":\"error\"},slot:\"error\"},[(!row.logoUrl)?_c('span',{staticClass:\"el-icon-picture-outline\"}):_c('img',{key:$index,staticClass:\"logo_url\",attrs:{\"src\":row.logoUrl,\"alt\":\"err\"}})])])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"timer\",\"label\":\"日期\"}}),_c('el-table-column',{attrs:{\"prop\":\"prop\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('el-button',{attrs:{\"type\":\"warning\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.undateTradeMark(row)}}},[_vm._v(\"修改\")]),_c('el-button',{staticClass:\"delete\",attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.del(row)}}},[_vm._v(\"删除\")])]}}])})],1),_c('el-pagination',{staticStyle:{\"margin-top\":\"20px\",\"text-align\":\"center\"},attrs:{\"current-page\":_vm.page,\"total\":_vm.total,\"page-size\":_vm.limit,\"pager-count\":7,\"page-sizes\":[5, 8, 12],\"layout\":\"total , prev , pager, next, jumper,->,sizes\"},on:{\"size-change\":_vm.sizeChange,\"current-change\":_vm.getPageList}})],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"TradeMarkIdex\">\r\n    <template v-if=\"$store.state.trademark.isShow\">\r\n      <router-view></router-view>\r\n    </template>\r\n    <div v-else>\r\n      <el-button type=\"primary\" icon=\"el-icon-plus\" style=\"margin: 10px 0\" @click=\"showAddTbale\">添加</el-button>\r\n\r\n      <!-- 对话框 -->\r\n      <el-dialog title=\"修改品牌\" :visible.sync=\"visible\">\r\n        <!-- mixin 进的数据 -->\r\n        <el-form style=\"width: 80%\" :model=\"tmform\" ref=\"tmform\" :rules=\"rules\">\r\n          <form-trade\r\n            :tmform=\"tmform\"\r\n            :handleAvatarSuccess=\"handleAvatarSuccess\"\r\n            :beforeAvatarUpload=\"beforeAvatarUpload\"\r\n            @changeTmName=\"changeTmName\"\r\n            @claerLogoUrl=\"claerLogoUrl\"\r\n          />\r\n          <!-- <el-form-item label=\"品牌名称\" label-width=\"'100px'\" required prop=\"tmName\">\r\n            <el-input autocomplete=\"off\" v-model=\"tmform.tmName\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"品牌LOGO\" label-width=\"'100px'\" required prop=\"logoUrl\">\r\n            <el-upload\r\n              class=\"avatar-uploader\"\r\n              action=\"/dev-api/admin/product/fileUpload\"\r\n              :show-file-list=\"false\"\r\n              :on-success=\"handleAvatarSuccess\"\r\n              :before-upload=\"beforeAvatarUpload\"\r\n            >\r\n              <div slot=\"tip\" class=\"el-upload__tip\">\r\n                只能上传jpg/png文件, 且不超过500kb\r\n              </div>\r\n              <img v-if=\"tmform.logoUrl\" :src=\"tmform.logoUrl\" class=\"avatar\" />\r\n              <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n            </el-upload>\r\n          </el-form-item>-->\r\n        </el-form>\r\n\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"visible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"OK\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n\r\n      <!-- 列表 -->\r\n      <el-table style=\"width: 100%\" :data=\"list\" stripe lazy border>\r\n        <el-table-column prop=\"id\" label=\"序号\" width=\"100\" align=\"center\">\r\n          <template slot-scope=\"{ $index }\">\r\n            <span>{{ $index + 1 + (page - 1) * limit }}</span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"tmName\" label=\"品牌名称\" show-overflow-tooltip></el-table-column>\r\n\r\n        <el-table-column prop=\"logoUrl\" label=\"品牌LOGO\">\r\n          <template slot-scope=\"{ row, $index }\">\r\n            <el-image>\r\n              <div slot=\"error\" class=\"image-slot\">\r\n                <span v-if=\"!row.logoUrl\" class=\"el-icon-picture-outline\"></span>\r\n                <img v-else :src=\"row.logoUrl\" :key=\"$index\" class=\"logo_url\" alt=\"err\" />\r\n              </div>\r\n            </el-image>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"timer\" label=\"日期\"></el-table-column>\r\n\r\n        <el-table-column prop=\"prop\" label=\"操作\">\r\n          <template slot-scope=\"{ row }\">\r\n            <el-button\r\n              type=\"warning\"\r\n              icon=\"el-icon-edit\"\r\n              size=\"mini\"\r\n              @click=\"undateTradeMark(row)\"\r\n            >修改</el-button>\r\n            <el-button\r\n              type=\"danger\"\r\n              icon=\"el-icon-delete\"\r\n              size=\"mini\"\r\n              class=\"delete\"\r\n              @click=\"del(row)\"\r\n            >删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 分页器 -->\r\n      <el-pagination\r\n        :current-page=\"page\"\r\n        :total=\"total\"\r\n        :page-size=\"limit\"\r\n        :pager-count=\"7\"\r\n        :page-sizes=\"[5, 8, 12]\"\r\n        layout=\"total , prev , pager, next, jumper,->,sizes\"\r\n        style=\"margin-top: 20px; text-align: center\"\r\n        @size-change=\"sizeChange\"\r\n        @current-change=\"getPageList\"\r\n      ></el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport PinaiMixin from './mixin/PinaiMixin'\r\nimport FormTrade from './components/formtrade'\r\nexport default {\r\n  name: 'TradeMarkIdex',\r\n  mixins: [PinaiMixin],\r\n  components: { FormTrade },\r\n  data () {\r\n    return {\r\n      page: 1, // 页码\r\n      limit: 8, // 展示数据条数\r\n      total: 0, // 总数据量\r\n      list: [], // 数据列表\r\n      visible: false\r\n    }\r\n  },\r\n  methods: {\r\n    // 拉取table数据\r\n    async getPageList (pager = this.page) {\r\n      this.page = pager\r\n      // 品牌列表\r\n      const { page, limit, $timer } = this\r\n      const result = await this.$apis.trademark.reqTradeMarkList(page, limit)\r\n\r\n      if (result.code === 200) {\r\n        const { records, total } = result.data\r\n        this.list = records.map((v, i) => {\r\n          v.timer = $timer(\r\n            $timer().valueOf() - parseInt(Math.random() * 1000000000)\r\n          ).format('L LTS')\r\n          if (v.tmName.includes('硅')) {\r\n            v.tmName = '这是一个名字'\r\n            v.logoUrl = 'http://47.93.148.192:8080/group1/M00/05/42/rBHu8mIz4dGATw5xAAZVHSssuyo174.jpg'\r\n          }\r\n          return v\r\n        })\r\n        this.total = total\r\n      }\r\n    },\r\n    sizeChange (limit) {\r\n      // 数据条数变化\r\n      this.limit = limit\r\n      this.getPageList()\r\n    },\r\n    // 添加\r\n    showAddTbale () {\r\n      // this.visible = true\r\n      this.$router.push('/trademark/additem')\r\n    },\r\n    // 修改\r\n    undateTradeMark (row) {\r\n      this.tmform = { ...row } // 浅拷贝\r\n      this.visible = true\r\n    },\r\n    // 删除\r\n    del (row) {\r\n      this.$confirm('是否删除该列?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(async () => {\r\n        const result = await this.$apis.trademark.resDelete(row.id)\r\n        this.$message({\r\n          type: result.code === 200 ? 'success' : 'error',\r\n          message: result.code === 200 ? '删除成功!' : '删除失败'\r\n        })\r\n        if (result.code === 200) {\r\n          // 当删到最后一条时\r\n          this.getPageList(this.list.length === 1 && this.page > 1 ? this.page - 1 : this.page)\r\n        }\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消删除'\r\n        })\r\n      })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getPageList()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='less'>\r\n.TradeMarkIdex {\r\n  .image-slot {\r\n    width: 50px;\r\n    height: 50px;\r\n    span {\r\n      border: 1px solid #aaaaaa;\r\n      width: 50px;\r\n      height: 50px;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n    }\r\n  }\r\n  .avatar-uploader .el-upload {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n  .avatar-uploader .el-upload:hover {\r\n    border-color: #409eff;\r\n  }\r\n  .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 178px;\r\n    line-height: 178px;\r\n    text-align: center;\r\n  }\r\n  .avatar {\r\n    width: 178px;\r\n    height: 178px;\r\n    display: block;\r\n  }\r\n  // .el-form{\r\n  //   margin: 0 auto;\r\n  // }\r\n  .inp {\r\n    //   width: 80%;\r\n    margin-left: 10px;\r\n    position: absolute;\r\n  }\r\n  .el-upload__tip {\r\n    margin-left: 92px;\r\n  }\r\n}\r\n</style>\r\n\r\n<style style='less' scoped>\r\n.logo_url {\r\n  width: 50px;\r\n  height: 50px;\r\n}\r\n.delete {\r\n  margin-left: 30px;\r\n}\r\n.image-slot {\r\n  width: 50px;\r\n  height: 50px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=78b750b7&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=less&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&id=78b750b7&style=less&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"78b750b7\",\n  null\n  \n)\n\nexport default component.exports","\r\nexport default {\r\n  data () {\r\n    // const validateLogo = (rule, value, callback) => {\r\n    //   console.log(rule, value, callback)\r\n    //   callback()\r\n    // }\r\n    return {\r\n      imageUrl: '',\r\n      tmform: { // form 收集表单属性\r\n        tmName: '',\r\n        logoUrl: ''\r\n      },\r\n      rules: {\r\n        tmName: [\r\n          { required: true, message: '请输入名称', tigger: 'blur' },\r\n          { min: 3, max: 12, message: '长度在3 到 12 之间', tigger: 'change' }\r\n        ],\r\n        logoUrl: [\r\n          { required: true, message: '请上传logo', tigger: 'change' }\r\n          // { required: true, validator: validateLogo, tigger: 'change' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    // 上传成功\r\n    handleAvatarSuccess (res, file) {\r\n      if (res.code === 200) {\r\n        this.tmform.logoUrl = res.data\r\n        this.$refs.tmform.validate()\r\n      } else {\r\n        this.$message({\r\n          message: '上传失败',\r\n          type: 'error'\r\n        })\r\n      }\r\n    },\r\n    // 上传之前\r\n    beforeAvatarUpload (file) {\r\n      const isJPG = file.type === 'image/jpeg'\r\n      const isLt2M = file.size / 1024 / 1024 < 2\r\n\r\n      if (!isJPG) {\r\n        this.$message.error('上传头像图片只能是 JPG 格式!')\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error('上传头像图片大小不能超过 2MB!')\r\n      }\r\n      return isJPG && isLt2M\r\n    },\r\n    // 保存\r\n    async OK () {\r\n      this.$refs.tmform.validate(async (bol, obj) => {\r\n        if (bol) {\r\n          const result = await this.$apis.trademark.reqSaveOrUpdate(this.tmform)\r\n          console.log(result)\r\n          if (result.code === 200) {\r\n            this.$message({\r\n              message: !this.tmform.id ? '保存成功' : '修改成功',\r\n              type: 'success'\r\n            })\r\n            if (this.$route.path === '/trademark/additem') {\r\n              this.$router.push('/trademark')\r\n            } else if (this.$route.path === '/trademark') {\r\n              this.visible = false\r\n              // 调用接口 刷新列表\r\n              this.getPageList()\r\n            }\r\n          } else {\r\n            this.$message({\r\n              message: !this.tmform.id ? '保存失败' : '修改失败',\r\n              type: 'error'\r\n            })\r\n          }\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    changeTmName (tmName) {\r\n      this.tmform.tmName = tmName\r\n    },\r\n    claerLogoUrl () { // 清除图片\r\n      this.tmform.logoUrl = ''\r\n    }\r\n  }\r\n}\r\n/**\r\n *\r\n */\r\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","model","value","callback","$$v","tmName","expression","handleAvatarSuccess","beforeAvatarUpload","slot","_v","tmform","logoUrl","on","$event","stopPropagation","directives","name","rawName","$emit","staticRenderFns","props","data","watch","immediate","handler","component","$store","state","trademark","staticStyle","showAddTbale","visible","ref","rules","changeTmName","claerLogoUrl","OK","list","scopedSlots","_u","key","fn","$index","_s","page","limit","row","undateTradeMark","del","total","sizeChange","getPageList","mixins","components","FormTrade","methods","async","pager","$timer","result","$apis","reqTradeMarkList","code","records","map","v","i","timer","format","includes","$router","push","$confirm","confirmButtonText","cancelButtonText","type","then","resDelete","id","$message","message","length","catch","mounted","imageUrl","required","tigger","min","max","res","file","$refs","validate","isJPG","isLt2M","size","error","bol","obj","reqSaveOrUpdate","console","log","$route","path"],"sourceRoot":""}